<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.control.Tooltip?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.VBox?>
<?import org.controlsfx.glyphfont.Glyph?>

<VBox alignment="TOP_LEFT" spacing="20.0" styleClass="view-container" stylesheets="@/css/styles.css"
      xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1"
      fx:controller="pe.edu.upeu.syslibrary.controller.UsuarioMainController">

    <padding>
        <Insets bottom="30.0" left="30.0" right="30.0" top="30.0" />
    </padding>

    <VBox spacing="25.0" styleClass="content-card" VBox.vgrow="ALWAYS">

        <HBox alignment="CENTER_LEFT" spacing="20.0">
            <VBox>
                <Label style="-fx-font-size: 22px; -fx-font-weight: 900; -fx-text-fill: #2c3e50;" text="Gesti칩n de Estudiantes" />
            </VBox>

            <HBox alignment="CENTER_LEFT" maxWidth="450.0" style="-fx-background-color: #f8f9fa; -fx-background-radius: 8; -fx-padding: 8 12;" HBox.hgrow="SOMETIMES">
                <Glyph fontFamily="FontAwesome" icon="SEARCH" style="-fx-text-fill: #999; -fx-font-size: 14px;">
                    <HBox.margin><Insets right="10.0" /></HBox.margin>
                </Glyph>
                <TextField fx:id="txtSearch" prefHeight="38.0" prefWidth="450.0" promptText="Buscar por DNI, C칩digo o Nombre..." style="-fx-background-color: transparent; -fx-prompt-text-fill: #aaa; -fx-text-fill: #333;" HBox.hgrow="ALWAYS" />
            </HBox>

            <Region HBox.hgrow="ALWAYS" />

            <HBox alignment="CENTER_RIGHT" spacing="15.0">
                <ComboBox fx:id="cmbFiltroCarrera" prefHeight="36.0" prefWidth="200.0" promptText="Todas las carreras" style="-fx-background-color: #f8f9fa; -fx-background-radius: 8; -fx-border-color: #e9ecef; -fx-border-radius: 8; -fx-padding: 2;" />

                <Button onAction="#handleNewStudent" style="-fx-background-color: #6a5acd; -fx-text-fill: white; -fx-font-weight: 900; -fx-background-radius: 8; -fx-padding: 10 20; -fx-cursor: hand; -fx-effect: dropshadow(gaussian, rgba(106, 90, 205, 0.3), 8, 0, 0, 2);">
                    <graphic><Glyph fontFamily="FontAwesome" icon="USER_PLUS" style="-fx-text-fill: white;" /></graphic>
                    <text> Nuevo Estudiante</text>
                </Button>

                <Button onAction="#handleRefrescar" prefHeight="35.0" style="-fx-background-color: #f8f9fa; -fx-text-fill: #555; -fx-font-weight: bold; -fx-background-radius: 8; -fx-border-color: #e9ecef; -fx-border-radius: 8; -fx-padding: 8 15; -fx-cursor: hand;" text=" Refrescar">
                    <graphic><Glyph fontFamily="FontAwesome" icon="REFRESH" style="-fx-text-fill: #27ae60;" /></graphic>
                </Button>
            </HBox>
        </HBox>

        <TableView fx:id="studentTable" style="-fx-background-color: transparent; -fx-base: transparent;" VBox.vgrow="ALWAYS">
            <columns>
                <TableColumn fx:id="colNum" prefWidth="50.0" style="-fx-alignment: CENTER;" text="#" />
                <TableColumn fx:id="colCodigo" prefWidth="100.0" text="C칩digo" />
                <TableColumn fx:id="colDNI" prefWidth="100.0" text="DNI" />
                <TableColumn fx:id="colNombres" prefWidth="200.0" text="Nombres" />
                <TableColumn fx:id="colApellidos" prefWidth="200.0" text="Apellidos" />
                <TableColumn fx:id="colCarrera" prefWidth="200.0" text="Carrera" />
                <TableColumn fx:id="colActions" prefWidth="120.0" style="-fx-alignment: CENTER;" text="Acciones" />
            </columns>
            <columnResizePolicy>
                <TableView fx:constant="CONSTRAINED_RESIZE_POLICY" />
            </columnResizePolicy>
        </TableView>

        <HBox alignment="CENTER" spacing="10.0" style="-fx-padding: 10 0 0 0; -fx-border-color: #eee; -fx-border-width: 1 0 0 0;">
            <Button fx:id="btnPrev" onAction="#handlePrevPage" style="-fx-background-color: white; -fx-border-color: #ddd; -fx-border-radius: 4; -fx-cursor: hand;">
                <graphic><Glyph fontFamily="FontAwesome" icon="CHEVRON_LEFT" textFill="#555"/></graphic>
            </Button>

            <Label fx:id="lblPaginacion" text="P치gina 1 de 1" style="-fx-font-weight: bold; -fx-text-fill: #555;" />

            <Button fx:id="btnNext" onAction="#handleNextPage" style="-fx-background-color: white; -fx-border-color: #ddd; -fx-border-radius: 4; -fx-cursor: hand;">
                <graphic><Glyph fontFamily="FontAwesome" icon="CHEVRON_RIGHT" textFill="#555"/></graphic>
            </Button>
        </HBox>

    </VBox>
</VBox>